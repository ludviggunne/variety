
workspace "variety"
    architecture "x64"
    configurations {
        "Debug",
        "Release"
    }

    files {
        "premake5.lua",
        ".gitignore",
        ".gitmodules",
        "variety/shaders/**.glsl"
    }

    startproject "variety"

    include "extern/glfw"

    project "variety"
        location "variety"
        kind "ConsoleApp"
        language "C++"
        cppdialect "C++20"
        staticruntime "On"

        targetdir ("bin/%{cfg.buildcfg}/")
        objdir ("obj/%{prj.name}/%{cfg.buildcfg}/%{prj.name}")

        files {
            "%{prj.name}/src/**.cpp",
            "%{prj.name}/src/**.h",

            "extern/glad/src/glad.c",
            "extern/imgui/imgui/imgui.cpp",
            "extern/imgui/imgui/imgui_demo.cpp",
            "extern/imgui/imgui/imgui_draw.cpp",
            "extern/imgui/imgui/imgui_tables.cpp",
            "extern/imgui/imgui/imgui_widgets.cpp",
            "extern/imgui/imgui/backends/imgui_impl_glfw.cpp",
            "extern/imgui/imgui/backends/imgui_impl_opengl3.cpp"
        }

        includedirs {
            "%{prj.name}/include",

            "extern/glad/include",
            "extern/imgui",
            
            "extern/glfw/include",

            "extern/glm",
            "extern/exprtk"
        }

        libdirs {
            "lib/glfw"
        }

        links {
            "opengl32.lib",
            "glfw.lib"
        }
        
        -- Disable empty control statement warnings generated by macro GLcall(expr)
        -- Disable deprecated storage class 'register' warnings generated by glm
        disablewarnings { "4390", "5033" }
        
        -- Due to error caused by dual_contour.cpp (obj file too big)
        -- Because of exprtk header ???

        buildoptions "/bigobj"

        filter "configurations:Debug"
		    defines "V_DEBUG"

		    buildoptions "/MDd"
		    symbols "On"

        filter "configurations:Release"
            defines "V_RELEASE"
            buildoptions "/MD"
            optimize "On"